<template>
    <div>
        <div class="flex flex-col items-start md:flex-row w-full md:items-center flex-wrap mb-8 bg-gray-100" v-if="editor">
            <div @click="editor.chain().focus().toggleBold().run()" :class="{ 'bg-gray-300': editor.isActive('bold') }" class="w-10 h-10 cursor-pointer px-2 flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="13" height="14" viewBox="0 0 13 14" fill="none">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M6.67444 13.5329H2.5547C1.96017 13.5329 1.5355 13.4041 1.28164 13.1455C1.02684 12.887 0.899902 12.4754 0.899902 11.9107V2.08832C0.899902 1.51245 1.03057 1.09712 1.29097 0.84512C1.55137 0.59312 1.9723 0.466187 2.5547 0.466187H6.9227C7.5667 0.466187 8.12484 0.504453 8.59617 0.58192C9.06844 0.659387 9.49217 0.807787 9.8655 1.02805C10.1838 1.21192 10.4666 1.44525 10.7111 1.72805C11.2 2.2863 11.4682 3.00387 11.4652 3.74592C11.4652 5.05352 10.7914 6.01019 9.4427 6.61592C11.2132 7.16285 12.0999 8.22685 12.0999 9.80885C12.1163 11.2331 11.2693 12.5257 9.95697 13.0793C9.50206 13.2568 9.0262 13.375 8.5411 13.4311C8.00817 13.4993 7.38564 13.5338 6.67444 13.5338V13.5329ZM6.4719 7.73032H3.6999V11.5449H6.5643C8.4095 11.5449 9.33163 10.9009 9.33163 9.61099C9.33163 8.95112 9.0927 8.47232 8.61483 8.17646C8.13697 7.87872 7.42297 7.73032 6.4719 7.73032V7.73032ZM3.6999 2.45419V5.83192H6.13217C6.81257 5.83192 7.33803 5.76939 7.7095 5.64525C8.07381 5.52517 8.37793 5.2695 8.55883 4.93125C8.71283 4.68205 8.78937 4.40299 8.78937 4.09405C8.78937 3.43419 8.5467 2.99645 8.06323 2.77899C7.57883 2.56245 6.84057 2.45419 5.84657 2.45419H3.6999V2.45419Z" fill="black"></path>
                    <mask id="mask0" mask-type="alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="13" height="14">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M6.67444 13.5329H2.5547C1.96017 13.5329 1.5355 13.4041 1.28164 13.1455C1.02684 12.887 0.899902 12.4754 0.899902 11.9107V2.08832C0.899902 1.51245 1.03057 1.09712 1.29097 0.84512C1.55137 0.59312 1.9723 0.466187 2.5547 0.466187H6.9227C7.5667 0.466187 8.12484 0.504453 8.59617 0.58192C9.06844 0.659387 9.49217 0.807787 9.8655 1.02805C10.1838 1.21192 10.4666 1.44525 10.7111 1.72805C11.2 2.2863 11.4682 3.00387 11.4652 3.74592C11.4652 5.05352 10.7914 6.01019 9.4427 6.61592C11.2132 7.16285 12.0999 8.22685 12.0999 9.80885C12.1163 11.2331 11.2693 12.5257 9.95697 13.0793C9.50206 13.2568 9.0262 13.375 8.5411 13.4311C8.00817 13.4993 7.38564 13.5338 6.67444 13.5338V13.5329ZM6.4719 7.73032H3.6999V11.5449H6.5643C8.4095 11.5449 9.33163 10.9009 9.33163 9.61099C9.33163 8.95112 9.0927 8.47232 8.61483 8.17646C8.13697 7.87872 7.42297 7.73032 6.4719 7.73032V7.73032ZM3.6999 2.45419V5.83192H6.13217C6.81257 5.83192 7.33803 5.76939 7.7095 5.64525C8.07381 5.52517 8.37793 5.2695 8.55883 4.93125C8.71283 4.68205 8.78937 4.40299 8.78937 4.09405C8.78937 3.43419 8.5467 2.99645 8.06323 2.77899C7.57883 2.56245 6.84057 2.45419 5.84657 2.45419H3.6999V2.45419Z" fill="white"></path>
                    </mask>
                    <g mask="url(#mask0)">
                    <rect x="-2.83337" y="-2.33337" width="18.6667" height="18.6667" fill="#333333"></rect>
                    </g>
                </svg>
            </div>
            <div @click="editor.chain().focus().toggleItalic().run()" :class="{ 'bg-gray-300': editor.isActive('italic') }" class="w-10 h-10 cursor-pointer px-2 flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="19" height="20" viewBox="0 0 19 20" fill="none">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M9.11354 14.3241L9.13314 14.3279C9.09954 14.6405 9.22181 14.9392 9.49994 15.2257C9.57647 15.3032 9.66141 15.3657 9.75567 15.4133H11.1314C11.4407 15.4133 11.6914 15.6641 11.6914 15.9733C11.6914 16.2826 11.4407 16.5333 11.1314 16.5333H5.11701C4.80773 16.5333 4.55701 16.2826 4.55701 15.9733C4.55701 15.6641 4.80773 15.4133 5.11701 15.4133H6.19034C6.63274 15.348 6.94541 15.2435 7.12834 15.1016C7.27487 14.9877 7.39994 14.8029 7.50541 14.5444L9.76034 5.63107C9.78767 5.3492 9.69208 5.06924 9.49807 4.86294C9.38474 4.73906 9.24324 4.6443 9.08554 4.58667H7.77327C7.46399 4.58667 7.21327 4.33595 7.21327 4.02667C7.21327 3.7174 7.46399 3.46667 7.77327 3.46667H13.7867C14.096 3.46667 14.3467 3.7174 14.3467 4.02667C14.3467 4.33595 14.096 4.58667 13.7867 4.58667H12.6714C12.3205 4.63894 12.0647 4.73134 11.9033 4.86294C11.7026 5.02627 11.5085 5.27267 11.3218 5.60027L9.11354 14.3241Z"
                    fill="#333333"></path>
                    <mask id="mask1" mask-type="alpha" maskUnits="userSpaceOnUse" x="4" y="3"
                    width="11" height="14">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M9.11354 14.3241L9.13314 14.3279C9.09954 14.6405 9.22181 14.9392 9.49994 15.2257C9.57647 15.3032 9.66141 15.3657 9.75567 15.4133H11.1314C11.4407 15.4133 11.6914 15.6641 11.6914 15.9733C11.6914 16.2826 11.4407 16.5333 11.1314 16.5333H5.11701C4.80773 16.5333 4.55701 16.2826 4.55701 15.9733C4.55701 15.6641 4.80773 15.4133 5.11701 15.4133H6.19034C6.63274 15.348 6.94541 15.2435 7.12834 15.1016C7.27487 14.9877 7.39994 14.8029 7.50541 14.5444L9.76034 5.63107C9.78767 5.3492 9.69208 5.06924 9.49807 4.86294C9.38474 4.73906 9.24324 4.6443 9.08554 4.58667H7.77327C7.46399 4.58667 7.21327 4.33595 7.21327 4.02667C7.21327 3.7174 7.46399 3.46667 7.77327 3.46667H13.7867C14.096 3.46667 14.3467 3.7174 14.3467 4.02667C14.3467 4.33595 14.096 4.58667 13.7867 4.58667H12.6714C12.3205 4.63894 12.0647 4.73134 11.9033 4.86294C11.7026 5.02627 11.5085 5.27267 11.3218 5.60027L9.11354 14.3241Z"
                    fill="white"></path>
                    </mask>
                    <g mask="url(#mask1)">
                    <rect x="0.166626" y="0.666626" width="18.6667" height="18.6667"
                    fill="#333333"></rect>
                    </g>
                </svg>
            </div>
            <div @click="editor.chain().focus().toggleBlockquote().run()" :class="{ 'bg-gray-300': editor.isActive('blockquote') }" class="w-10 h-10 cursor-pointer px-2 flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="29" height="28" viewBox="0 0 29 28" fill="none">
                    <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M7.57605 14.4983C7.61344 11.3362 10.0734 8.73324 13.2283 8.51746L13.2638 9.14279C10.7942 9.83159 9.77312 11.9223 9.64805 14.1035H13.176C13.6912 14.1035 13.6427 14.5067 13.6427 15.0237V19.234C13.6427 19.7511 13.2246 19.7035 12.7094 19.7035H8.04272C7.52752 19.7035 7.57605 19.2844 7.57605 18.7673V15.0237V14.4983ZM15.0427 14.4983C15.0801 11.3362 17.5401 8.73324 20.695 8.51746L20.7304 9.14279C18.2608 9.83252 17.2398 11.9232 17.1156 14.1035H20.6427C21.1579 14.1035 21.1094 14.5067 21.1094 15.0237V19.234C21.1094 19.7511 20.6912 19.7035 20.176 19.7035H15.5094C14.9942 19.7035 15.0427 19.2844 15.0427 18.7673V15.0237V14.4983Z"
                    fill="black"
                    />
                    <mask id="mask6" mask-type="alpha" maskUnits="userSpaceOnUse" x="7" y="8" width="15" height="12">
                    <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M7.57605 14.4983C7.61344 11.3362 10.0734 8.73324 13.2283 8.51746L13.2638 9.14279C10.7942 9.83159 9.77312 11.9223 9.64805 14.1035H13.176C13.6912 14.1035 13.6427 14.5067 13.6427 15.0237V19.234C13.6427 19.7511 13.2246 19.7035 12.7094 19.7035H8.04272C7.52752 19.7035 7.57605 19.2844 7.57605 18.7673V15.0237V14.4983ZM15.0427 14.4983C15.0801 11.3362 17.5401 8.73324 20.695 8.51746L20.7304 9.14279C18.2608 9.83252 17.2398 11.9232 17.1156 14.1035H20.6427C21.1579 14.1035 21.1094 14.5067 21.1094 15.0237V19.234C21.1094 19.7511 20.6912 19.7035 20.176 19.7035H15.5094C14.9942 19.7035 15.0427 19.2844 15.0427 18.7673V15.0237V14.4983Z"
                    fill="white"
                    />
                    </mask>
                    <g mask="url(#mask6)">
                    <rect x="5.16663" y="4.66663" width="18.6667" height="18.6667" fill="#333333" />
                    </g>
                </svg>
            </div>
            <div @click="setLink" :class="{ 'bg-gray-300': editor.isActive('link') }" class="w-10 h-10 cursor-pointer px-2 flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="29" height="28" viewBox="0 0 29 28" fill="none">
                <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M15.5051 18.6666L16.4301 17.345C16.5734 17.1401 16.8153 17.0272 17.0644 17.049C17.3135 17.0707 17.5322 17.2237 17.6379 17.4503C17.7437 17.6769 17.7205 17.9428 17.5771 18.1477L16.5057 19.6783C16.4518 19.7554 16.3829 19.8208 16.3031 19.8706C14.6306 21.6199 11.9317 21.8864 9.94937 20.4981C7.96703 19.1098 7.29487 16.4823 8.367 14.3126C8.38567 14.2239 8.423 14.1362 8.479 14.0569L9.54953 12.5271C9.68919 12.3131 9.93439 12.1922 10.1892 12.2117C10.444 12.2312 10.6679 12.3881 10.7734 12.6208C10.8788 12.8536 10.849 13.1254 10.6957 13.3298L9.77073 14.6533L9.77633 14.6561C8.80981 16.2334 9.23769 18.2905 10.753 19.3517C12.2684 20.4128 14.3478 20.1114 15.4995 18.6638L15.5051 18.6675V18.6666ZM20.6329 13.6873C20.6131 13.7792 20.575 13.8662 20.5209 13.943L19.4503 15.4727C19.3107 15.6868 19.0655 15.8077 18.8107 15.7881C18.5559 15.7686 18.3319 15.6118 18.2265 15.379C18.121 15.1462 18.1508 14.8745 18.3042 14.6701L19.1069 13.5221C20.1991 11.9387 19.8089 9.77054 18.233 8.66739C16.6572 7.56424 14.4864 7.93957 13.3725 9.5078L12.5698 10.6549C12.3481 10.9716 11.9117 11.0487 11.5949 10.8271C11.2782 10.6054 11.2011 10.1689 11.4227 9.8522L12.4942 8.32153C12.5481 8.24445 12.617 8.17906 12.6967 8.12926C14.3692 6.38001 17.0682 6.11347 19.0505 7.50178C21.0328 8.8901 21.705 11.5176 20.6329 13.6873ZM16.3741 11.3241C16.5262 11.4306 16.6298 11.5932 16.662 11.7761C16.6943 11.9591 16.6524 12.1473 16.5458 12.2994L13.6011 16.5041C13.4578 16.709 13.2159 16.8218 12.9668 16.8001C12.7177 16.7784 12.499 16.6254 12.3933 16.3988C12.2875 16.1721 12.3107 15.9063 12.4541 15.7014L15.3987 11.4958C15.5053 11.3436 15.6679 11.24 15.8508 11.2078C16.0337 11.1756 16.222 11.2174 16.3741 11.3241Z"
                fill="black"
                />
                <mask id="mask2" mask-type="alpha" maskUnits="userSpaceOnUse" x="7" y="6" width="15" height="16">
                <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M15.5051 18.6666L16.4301 17.345C16.5734 17.1401 16.8153 17.0272 17.0644 17.049C17.3135 17.0707 17.5322 17.2237 17.6379 17.4503C17.7437 17.6769 17.7205 17.9428 17.5771 18.1477L16.5057 19.6783C16.4518 19.7554 16.3829 19.8208 16.3031 19.8706C14.6306 21.6199 11.9317 21.8864 9.94937 20.4981C7.96703 19.1098 7.29487 16.4823 8.367 14.3126C8.38567 14.2239 8.423 14.1362 8.479 14.0569L9.54953 12.5271C9.68919 12.3131 9.93439 12.1922 10.1892 12.2117C10.444 12.2312 10.6679 12.3881 10.7734 12.6208C10.8788 12.8536 10.849 13.1254 10.6957 13.3298L9.77073 14.6533L9.77633 14.6561C8.80981 16.2334 9.23769 18.2905 10.753 19.3517C12.2684 20.4128 14.3478 20.1114 15.4995 18.6638L15.5051 18.6675V18.6666ZM20.6329 13.6873C20.6131 13.7792 20.575 13.8662 20.5209 13.943L19.4503 15.4727C19.3107 15.6868 19.0655 15.8077 18.8107 15.7881C18.5559 15.7686 18.3319 15.6118 18.2265 15.379C18.121 15.1462 18.1508 14.8745 18.3042 14.6701L19.1069 13.5221C20.1991 11.9387 19.8089 9.77054 18.233 8.66739C16.6572 7.56424 14.4864 7.93957 13.3725 9.5078L12.5698 10.6549C12.3481 10.9716 11.9117 11.0487 11.5949 10.8271C11.2782 10.6054 11.2011 10.1689 11.4227 9.8522L12.4942 8.32153C12.5481 8.24445 12.617 8.17906 12.6967 8.12926C14.3692 6.38001 17.0682 6.11347 19.0505 7.50178C21.0328 8.8901 21.705 11.5176 20.6329 13.6873ZM16.3741 11.3241C16.5262 11.4306 16.6298 11.5932 16.662 11.7761C16.6943 11.9591 16.6524 12.1473 16.5458 12.2994L13.6011 16.5041C13.4578 16.709 13.2159 16.8218 12.9668 16.8001C12.7177 16.7784 12.499 16.6254 12.3933 16.3988C12.2875 16.1721 12.3107 15.9063 12.4541 15.7014L15.3987 11.4958C15.5053 11.3436 15.6679 11.24 15.8508 11.2078C16.0337 11.1756 16.222 11.2174 16.3741 11.3241Z"
                fill="white"
                />
                </mask>
                <g mask="url(#mask2)">
                <rect x="5.16663" y="4.66663" width="18.6667" height="18.6667" fill="#333333" />
                </g>
                </svg>
            </div>
            <div @click="editor.chain().focus().toggleBulletList().run()" :class="{ 'bg-gray-300': editor.isActive('bulletList') }" class="w-10 h-10 cursor-pointer px-2 flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="29" height="28" viewBox="0 0 29 28" fill="none">
                <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M12.1667 9.56668C12.1667 9.95308 12.4803 10.2667 12.8667 10.2667H21.7333C22.1199 10.2667 22.4333 9.95328 22.4333 9.56668C22.4333 9.18008 22.1199 8.86668 21.7333 8.86668H12.8667C12.4801 8.86668 12.1667 9.18008 12.1667 9.56668ZM6.56665 9.56668C6.56665 8.66508 7.29185 7.93335 8.19998 7.93335C9.10158 7.93335 9.83332 8.65855 9.83332 9.56668C9.83332 10.4683 9.10812 11.2 8.19998 11.2C7.29838 11.2 6.56665 10.4748 6.56665 9.56668ZM12.1667 17.9667C12.1667 18.3531 12.4803 18.6667 12.8667 18.6667H21.7333C22.1199 18.6667 22.4333 18.3533 22.4333 17.9667C22.4333 17.5801 22.1199 17.2667 21.7333 17.2667H12.8667C12.4801 17.2667 12.1667 17.5801 12.1667 17.9667ZM6.56665 17.9667C6.56665 17.0651 7.29185 16.3333 8.19998 16.3333C9.10158 16.3333 9.83332 17.0585 9.83332 17.9667C9.83332 18.8683 9.10812 19.6 8.19998 19.6C7.29838 19.6 6.56665 18.8748 6.56665 17.9667Z"
                fill="black"
                />
                <mask id="mask3" mask-type="alpha" maskUnits="userSpaceOnUse" x="6" y="7" width="17" height="13">
                <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M12.1667 9.56668C12.1667 9.95308 12.4803 10.2667 12.8667 10.2667H21.7333C22.1199 10.2667 22.4333 9.95328 22.4333 9.56668C22.4333 9.18008 22.1199 8.86668 21.7333 8.86668H12.8667C12.4801 8.86668 12.1667 9.18008 12.1667 9.56668ZM6.56665 9.56668C6.56665 8.66508 7.29185 7.93335 8.19998 7.93335C9.10158 7.93335 9.83332 8.65855 9.83332 9.56668C9.83332 10.4683 9.10812 11.2 8.19998 11.2C7.29838 11.2 6.56665 10.4748 6.56665 9.56668ZM12.1667 17.9667C12.1667 18.3531 12.4803 18.6667 12.8667 18.6667H21.7333C22.1199 18.6667 22.4333 18.3533 22.4333 17.9667C22.4333 17.5801 22.1199 17.2667 21.7333 17.2667H12.8667C12.4801 17.2667 12.1667 17.5801 12.1667 17.9667ZM6.56665 17.9667C6.56665 17.0651 7.29185 16.3333 8.19998 16.3333C9.10158 16.3333 9.83332 17.0585 9.83332 17.9667C9.83332 18.8683 9.10812 19.6 8.19998 19.6C7.29838 19.6 6.56665 18.8748 6.56665 17.9667Z"
                fill="white"
                />
                </mask>
                <g mask="url(#mask3)">
                <rect x="5.16663" y="4.66663" width="18.6667" height="18.6667" fill="#333333" />
                </g>
                </svg>
            </div>
            <div @click="editor.chain().focus().toggleOrderedList().run()" :class="{ 'bg-gray-300': editor.isActive('orderedList') }" class="w-10 h-10 cursor-pointer px-2 flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="29" height="28" viewBox="0 0 29 28" fill="none">
                <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M12.6333 10.0333C12.6333 10.4197 12.9469 10.7333 13.3333 10.7333H22.2C22.5866 10.7333 22.9 10.4199 22.9 10.0333C22.9 9.64671 22.5866 9.33331 22.2 9.33331H13.3333C12.9467 9.33331 12.6333 9.64671 12.6333 10.0333ZM9.36666 7.46665V12.1333H7.96666V8.11998H7.03333V7.18665H9.36666V7.46665ZM6.42013 21.3332L8.83746 18.2933H8.82533C8.96082 18.0579 8.90789 17.7593 8.69977 17.5848C8.49165 17.4103 8.18833 17.4103 7.98021 17.5848C7.7721 17.7593 7.71917 18.0579 7.85466 18.2933H6.38186C6.34741 17.605 6.69502 16.9537 7.28604 16.5992C7.87706 16.2447 8.61532 16.2447 9.20634 16.5992C9.79736 16.9537 10.145 17.605 10.1105 18.2933H10.1096C10.0648 18.6713 9.96026 18.9784 9.79879 19.2154C9.63546 19.4525 9.24813 19.8613 8.63773 20.44H10.1133V21.3733H6.37999L6.42013 21.3332ZM12.6333 18.4333C12.6333 18.0467 12.9467 17.7333 13.3333 17.7333H22.2C22.5866 17.7333 22.9 18.0467 22.9 18.4333C22.9 18.8199 22.5866 19.1333 22.2 19.1333H13.3333C12.9467 19.1333 12.6333 18.8199 12.6333 18.4333Z"
                fill="black"
                />
                <mask id="mask4" mask-type="alpha" maskUnits="userSpaceOnUse" x="6" y="7" width="17" height="15">
                <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M12.6333 10.0333C12.6333 10.4197 12.9469 10.7333 13.3333 10.7333H22.2C22.5866 10.7333 22.9 10.4199 22.9 10.0333C22.9 9.64671 22.5866 9.33331 22.2 9.33331H13.3333C12.9467 9.33331 12.6333 9.64671 12.6333 10.0333ZM9.36666 7.46665V12.1333H7.96666V8.11998H7.03333V7.18665H9.36666V7.46665ZM6.42013 21.3332L8.83746 18.2933H8.82533C8.96082 18.0579 8.90789 17.7593 8.69977 17.5848C8.49165 17.4103 8.18833 17.4103 7.98021 17.5848C7.7721 17.7593 7.71917 18.0579 7.85466 18.2933H6.38186C6.34741 17.605 6.69502 16.9537 7.28604 16.5992C7.87706 16.2447 8.61532 16.2447 9.20634 16.5992C9.79736 16.9537 10.145 17.605 10.1105 18.2933H10.1096C10.0648 18.6713 9.96026 18.9784 9.79879 19.2154C9.63546 19.4525 9.24813 19.8613 8.63773 20.44H10.1133V21.3733H6.37999L6.42013 21.3332ZM12.6333 18.4333C12.6333 18.0467 12.9467 17.7333 13.3333 17.7333H22.2C22.5866 17.7333 22.9 18.0467 22.9 18.4333C22.9 18.8199 22.5866 19.1333 22.2 19.1333H13.3333C12.9467 19.1333 12.6333 18.8199 12.6333 18.4333Z"
                fill="white"
                />
                </mask>
                <g mask="url(#mask4)">
                <rect x="5.16663" y="4.66663" width="18.6667" height="18.6667" fill="#333333" />
                </g>
                </svg>
            </div>
        </div>
        <editor-content :editor="editor" :focus="focus" class="mb-12" />
    </div>
</template>

<script>
    import { Editor, EditorContent, BubbleMenu, FloatingMenu } from '@tiptap/vue-3'
    import Link from '@tiptap/extension-link'
    import Placeholder from '@tiptap/extension-placeholder'
    import StarterKit from '@tiptap/starter-kit'

    export default {
        components: {
            EditorContent, 
            BubbleMenu,
            FloatingMenu
        },

        props: {
            modelValue: {
                type: String,
                default: ''
            }
        },

        data () {
            return { 
                editor: null
            }
        },

        watch: {
            modelValue (value) {
                const isSame = this.editor.getHTML() === value

                if (isSame) {
                    return
                }

                this.editor.commands.setContent(this.modelValue, false)
            }
        },

        mounted () {
            this.editor = new Editor({
                content: this.modelValue,
                extensions: [
                    StarterKit,
                    Link,
                    Placeholder
                ],
                onUpdate: () => {
                    this.$emit('update:modelValue', this.editor.getHTML())
                }
            })
        },
        
        methods: {
            setLink() {
                const url = window.prompt('URL')

                this.editor.chain().focus().setLink({ href: url }).run()
            }
        },

        beforeUnmount () {
            this.editor.destroy()
        }
    }
</script>

<style lang="scss">
    /* Basic editor styles */
    .ProseMirror {
        > * + * {
            margin-top: 0.75em;
        }

        ul,
        ol {
            padding: 0 1rem;
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            line-height: 1.1;
        }

        code {
            background-color: rgba(#616161, 0.1);
            color: #616161;
        }

        pre {
            background: #0D0D0D;
            color: #FFF;
            font-family: 'JetBrainsMono', monospace;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;

            code {
            color: inherit;
            padding: 0;
            background: none;
            font-size: 0.8rem;
            }
        }

        img {
            max-width: 100%;
            height: auto;
        }

        blockquote {
            padding-left: 1rem;
            border-left: 2px solid rgba(#0D0D0D, 0.1);
        }

        hr {
            border: none;
            border-top: 2px solid rgba(#0D0D0D, 0.1);
            margin: 2rem 0;
        }

        .bg-custom-gray-2 {
            background: #FAFAFA;
        }

        .bubble-menu {
            display: flex;
            background-color: #0D0D0D;
            padding: 0.2rem;
            border-radius: 0.5rem;

            button {
                border: none;
                background: none;
                color: #FFF;
                font-size: 0.85rem;
                font-weight: 500;
                padding: 0 0.2rem;
                opacity: 0.6;

                &:hover,
                &.is-active {
                    opacity: 1;
                }
            }
        }

        .floating-menu {
            display: flex;
            background-color: #0D0D0D10;
            padding: 0.2rem;
            border-radius: 0.5rem;

            button {
                border: none;
                background: none;
                font-size: 0.85rem;
                font-weight: 500;
                padding: 0 0.2rem;
                opacity: 0.6;

                &:hover,
                &.is-active {
                    opacity: 1;
                }
            }
        }

        a {
            color: #4f46e5;
        }
    }

    .ProseMirror p.is-editor-empty:first-child::before {
        content: attr(data-placeholder);
        float: left;
        color: #ced4da;
        pointer-events: none;
        height: 0;
    }
</style>